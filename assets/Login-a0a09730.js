import{r as g,j as s,a as w,Q as t}from"./index-8f09cb27.js";import{u as y,a as S,F as f,S as F,d as c,E as d,I as E,B as b,e as L,f as I,g as R,o as B,l as P,A as v}from"./AuthLayout-b9fcbc7b.js";function A(){var i,l;const[e,u]=g.useState(!0),m=y(),{register:o,handleSubmit:h,formState:{errors:n},reset:x}=S({defaultValues:{email:"",password:""},resolver:B(P)}),p=({email:r,password:j})=>{m(w({email:r,password:j})).unwrap().then(a=>{t.success(`Successfully logged in as ${a.user.name}`)}).catch(a=>{a==="Request failed with status code 400"?t.error("Wrong email or password"):t.error("Something went wrong, try one nore time!")}),x()};return s.jsxs(f,{children:[s.jsx("h3",{children:"Log in to your account"}),s.jsxs(F,{onSubmit:h(p),children:[s.jsx("label",{htmlFor:"email",children:"Email"}),s.jsx(c,{...o("email"),type:"email",id:"email"}),s.jsx(d,{children:(i=n.email)==null?void 0:i.message}),s.jsx("label",{htmlFor:"password",children:"Password"}),s.jsxs(E,{children:[s.jsx(c,{...o("password"),type:e?"password":"text",id:"password"}),s.jsx(b,{onClick:()=>u(r=>!r),children:e&&s.jsx(L,{})||!e&&s.jsx(I,{})})]}),s.jsx(d,{children:(l=n.password)==null?void 0:l.message}),s.jsx(R,{type:"submit",children:"Login"})]}),s.jsx("p",{children:"Don`t have an account?"})]})}function W(){return s.jsx(v,{children:s.jsx(A,{})})}export{W as default};
